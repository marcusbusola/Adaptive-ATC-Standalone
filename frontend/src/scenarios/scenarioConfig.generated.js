/**
 * ATC Scenario Configurations (Auto-Generated)
 *
 * DO NOT EDIT THIS FILE DIRECTLY!
 * This file is auto-generated from backend/scenarios/scenario_manifest.json
 * Run: npm run generate-config (or it runs automatically on build)
 *
 * Generated at: 2025-12-06T17:51:19.020Z
 */

export const scenarios = {
  "L1": {
    "id": "L1",
    "name": "Baseline Emergency / Non-Routine Event",
    "description": "Low-density scenario with dual emergency and peripheral comm loss",
    "complexity": "low",
    "workload": "low",
    "aircraftCount": 5,
    "duration": 360,
    "alertFrequency": 2.5,
    "phases": [
      {
        "phase": 1,
        "name": "Low-Density Routine",
        "start": 0,
        "end": 36,
        "description": "Routine monitoring, 5 aircraft"
      },
      {
        "phase": 2,
        "name": "Primary Emergency",
        "start": 36,
        "end": 156,
        "description": "UAL238 dual emergency (fuel + medical)"
      },
      {
        "phase": 3,
        "name": "Peripheral Comm Loss",
        "start": 156,
        "end": 360,
        "description": "AAL119 silent comm/datalink failure"
      }
    ],
    "sagatProbeTimes": [
      60,
      138,
      168
    ],
    "eventTypes": [
      "phase_transition",
      "emergency",
      "comm_loss"
    ],
    "keyMeasurements": [
      "AAL119 comm loss detection time",
      "AAL119 comm loss resolution time",
      "SAGAT situation awareness scores"
    ],
    "expectedDetectionTimes": {
      "condition_1_traditional": 42,
      "condition_2_adaptive": 20,
      "condition_3_ml": 14
    }
  },
  "L2": {
    "id": "L2",
    "name": "System Failure Overload / Irony of Automation",
    "description": "Silent automation failure followed by VFR intrusion",
    "complexity": "low",
    "workload": "low",
    "aircraftCount": 5,
    "duration": 360,
    "alertFrequency": 7,
    "phases": [
      {
        "phase": 1,
        "name": "Trust Building",
        "start": 0,
        "end": 72,
        "description": "Everything works perfectly to build trust"
      },
      {
        "phase": 2,
        "name": "Silent Communication Failure",
        "start": 72,
        "end": 120,
        "description": "Frequency 119.5 goes offline (no alert)"
      },
      {
        "phase": 3,
        "name": "VFR Intrusion",
        "start": 120,
        "end": 360,
        "description": "Unauthorized VFR aircraft enters airspace"
      }
    ],
    "sagatProbeTimes": [
      60,
      138,
      168
    ],
    "eventTypes": [
      "phase_transition",
      "comm_failure",
      "vfr_intrusion"
    ],
    "keyMeasurements": [
      "Comm failure detection time",
      "VFR intrusion detection time",
      "VFR intrusion action time"
    ],
    "expectedDetectionTimes": {
      "comm_failure": {
        "condition_1_traditional": 45,
        "condition_2_rule_based": 0,
        "condition_3_ml": -15
      },
      "vfr_intrusion": {
        "condition_1_traditional": 20,
        "condition_2_rule_based": 15,
        "condition_3_ml": 10
      }
    }
  },
  "L3": {
    "id": "L3",
    "name": "Automation Complacency / Vigilance",
    "description": "Silent system crash followed by unalerted conflict",
    "complexity": "low",
    "workload": "low",
    "aircraftCount": 5,
    "duration": 360,
    "alertFrequency": 3,
    "phases": [
      {
        "phase": 1,
        "name": "Reliable Automation",
        "start": 0,
        "end": 120,
        "description": "Perfect conflict detection builds complacency"
      },
      {
        "phase": 2,
        "name": "Silent System Crash",
        "start": 120,
        "end": 156,
        "description": "Conflict detection crashes silently"
      },
      {
        "phase": 3,
        "name": "Unalerted Conflict",
        "start": 156,
        "end": 360,
        "description": "DAL456/JBU567 conflict without automatic alert"
      }
    ],
    "sagatProbeTimes": [
      60,
      138,
      168
    ],
    "eventTypes": [
      "phase_transition",
      "system_crash",
      "conflict_threshold"
    ],
    "keyMeasurements": [
      "Manual conflict detection rate",
      "System crash detection time",
      "Conflict response time",
      "Manual check frequency",
      "Scan thoroughness"
    ],
    "expectedDetectionRates": {
      "manual_conflict_detection": {
        "condition_1_traditional": 0.7,
        "condition_2_rule_based": 0.95,
        "condition_3_ml": 0.98
      },
      "system_crash_detection": {
        "condition_1_traditional": 0.4,
        "condition_2_rule_based": 0.75,
        "condition_3_ml": 0.85
      }
    },
    "expectedResponseTimes": {
      "condition_1_traditional": 45,
      "condition_2_rule_based": 20,
      "condition_3_ml": 10
    }
  },
  "H4": {
    "id": "H4",
    "name": "Conflict-Driven Tunneling / VFR Intrusion",
    "description": "High-density scenario with critical conflict and peripheral VFR intrusion",
    "complexity": "high",
    "workload": "high",
    "aircraftCount": 9,
    "duration": 360,
    "alertFrequency": 6,
    "phases": [
      {
        "phase": 1,
        "name": "High-Density Tactical Load",
        "start": 0,
        "end": 120,
        "description": "9 aircraft, active management, conflict develops"
      },
      {
        "phase": 2,
        "name": "Imminent Separation Violation",
        "start": 120,
        "end": 156,
        "description": "DAL332/AAL908 collision course, immediate action required"
      },
      {
        "phase": 3,
        "name": "Peripheral VFR Intrusion",
        "start": 156,
        "end": 360,
        "description": "N123AB VFR intrusion during conflict management"
      }
    ],
    "sagatProbeTimes": [
      60,
      138,
      168
    ],
    "eventTypes": [
      "phase_transition",
      "conflict",
      "aircraft_spawn",
      "internal"
    ],
    "keyMeasurements": [
      "N123AB VFR intrusion detection time",
      "DAL332/AAL908 conflict resolution time",
      "Fixation duration on primary conflict",
      "SAGAT situation awareness scores"
    ],
    "expectedDetectionTimes": {
      "condition_1_traditional": 35,
      "condition_2_adaptive": 18,
      "condition_3_ml": 12
    }
  },
  "H5": {
    "id": "H5",
    "name": "Compounded Stress / Multi-Crisis",
    "description": "High-workload multi-crisis scenario with weather rerouting, fuel emergency, and altitude deviation",
    "complexity": "high",
    "workload": "high",
    "aircraftCount": 9,
    "duration": 360,
    "alertFrequency": 11,
    "phases": [
      {
        "phase": 1,
        "name": "Weather Rerouting (Building Stress)",
        "start": 0,
        "end": 72,
        "description": "9 aircraft rerouting around severe thunderstorm"
      },
      {
        "phase": 2,
        "name": "Fuel Emergency on Top of Weather",
        "start": 72,
        "end": 156,
        "description": "UAL345 fuel emergency while managing weather reroutes"
      },
      {
        "phase": 3,
        "name": "Unauthorized Altitude Deviation",
        "start": 156,
        "end": 360,
        "description": "AAL300 altitude deviation during emergency + weather management"
      }
    ],
    "sagatProbeTimes": [
      60,
      138,
      168
    ],
    "eventTypes": [
      "phase_transition",
      "weather",
      "emergency",
      "altitude_deviation",
      "internal"
    ],
    "keyMeasurements": [
      "AAL300 altitude deviation detection time",
      "Parallel crisis management quality",
      "Attention distribution across crises",
      "SAGAT situation awareness scores"
    ],
    "expectedDetectionTimes": {
      "condition_1_traditional": 45,
      "condition_2_adaptive": 22,
      "condition_3_ml": 15
    },
    "weatherSystem": {
      "center": [
        175,
        125
      ],
      "radius": 30,
      "type": "Severe thunderstorms, embedded hail",
      "effect": "Blocks all direct routes through center"
    }
  },
  "H6": {
    "id": "H6",
    "name": "Cry Wolf Effect / Alert Filtering",
    "description": "High-workload scenario testing trust calibration after false alarm",
    "complexity": "high",
    "workload": "high",
    "aircraftCount": 9,
    "duration": 360,
    "alertFrequency": 8,
    "phases": [
      {
        "phase": 1,
        "name": "Normal High-Workload Operations",
        "start": 0,
        "end": 120,
        "description": "9 aircraft, routine operations, establish baseline trust"
      },
      {
        "phase": 2,
        "name": "FALSE ALARM - Conflict Alert",
        "start": 120,
        "end": 156,
        "description": "UAL600/SWA700 false conflict alert (6.8nm actual, 4.2nm predicted)"
      },
      {
        "phase": 3,
        "name": "REAL Conflict (Delayed Alert)",
        "start": 156,
        "end": 360,
        "description": "DAL300/AAL900 real conflict, alert delayed 20 seconds"
      }
    ],
    "sagatProbeTimes": [
      60,
      138,
      168
    ],
    "eventTypes": [
      "phase_transition",
      "false_alarm",
      "conflict",
      "delayed_alert"
    ],
    "keyMeasurements": [
      "False alarm detection and dismissal time",
      "Real conflict response time",
      "Trust calibration (pre/post false alarm)",
      "Alert dismissal time comparison",
      "SAGAT situation awareness scores"
    ],
    "expectedDetectionTimes": {
      "condition_1_traditional": 45,
      "condition_2_adaptive": 28,
      "condition_3_ml": 18
    },
    "trustCalibration": {
      "false_alarm_pair": [
        "UAL600",
        "SWA700"
      ],
      "real_conflict_pair": [
        "DAL300",
        "AAL900"
      ],
      "alert_delay_seconds": 20
    }
  }
};

/**
 * Get scenario by ID
 */
export function getScenario(scenarioId) {
  return scenarios[scenarioId] || null;
}

/**
 * Get all scenarios as array
 */
export function getAllScenarios() {
  return Object.values(scenarios);
}

/**
 * Get all scenario IDs
 */
export function getScenarioIds() {
  return Object.keys(scenarios);
}

/**
 * Calculate workload score for a scenario (0-1)
 */
export function calculateWorkload(scenarioId) {
  const scenario = getScenario(scenarioId);
  if (!scenario) return 0;

  const complexityScore = scenario.complexity === 'high' ? 0.6 : 0.2;
  const trafficScore = (scenario.aircraftCount / 20) * 0.4;

  return Math.min(complexityScore + trafficScore, 1);
}

/**
 * Get phase at a given time
 */
export function getPhaseAtTime(scenarioId, elapsedSeconds) {
  const scenario = getScenario(scenarioId);
  if (!scenario || !scenario.phases) return null;

  for (let i = scenario.phases.length - 1; i >= 0; i--) {
    if (elapsedSeconds >= scenario.phases[i].start) {
      return scenario.phases[i];
    }
  }
  return scenario.phases[0];
}

/**
 * Check if a SAGAT probe should trigger at the given time
 */
export function getSagatProbeAtTime(scenarioId, elapsedSeconds, tolerance = 1) {
  const scenario = getScenario(scenarioId);
  if (!scenario || !scenario.sagatProbeTimes) return null;

  for (const probeTime of scenario.sagatProbeTimes) {
    if (Math.abs(elapsedSeconds - probeTime) <= tolerance) {
      return probeTime;
    }
  }
  return null;
}

/**
 * Get expected detection time for a condition
 */
export function getExpectedDetectionTime(scenarioId, condition) {
  const scenario = getScenario(scenarioId);
  if (!scenario || !scenario.expectedDetectionTimes) return null;

  const conditionKey = `condition_${condition}_${condition === 1 ? 'traditional' : condition === 2 ? 'adaptive' : 'ml'}`;

  // Handle nested structure (like L2) or flat structure
  if (typeof scenario.expectedDetectionTimes === 'object' && !Array.isArray(scenario.expectedDetectionTimes)) {
    // Check if it's nested (has sub-objects with condition keys)
    const firstValue = Object.values(scenario.expectedDetectionTimes)[0];
    if (typeof firstValue === 'object') {
      // Return the whole object for scenarios with multiple measurements
      return scenario.expectedDetectionTimes;
    }
    // Flat structure
    return scenario.expectedDetectionTimes[conditionKey];
  }

  return null;
}

export default scenarios;
